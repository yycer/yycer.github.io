---
layout: post
title: leetcode - [394] Decode String
category: algorithm
tags: [algorithm]
excerpt: Decode String
---

## 问题描述  

> Given an encoded string, return its decoded string.  

> The encoding rule is: k[encoded_string], where the encoded_string inside the square brackets is being repeated exactly k times. Note that k is guaranteed to be a positive integer.  

> You may assume that the input string is always valid; No extra white spaces, square brackets are well-formed, etc.  

> Furthermore, you may assume that the original data does not contain any digits and that digits are only for those repeat numbers, k. For example, there won't be input like 3a or 2[4].  

给你一个编完码的字符串，请输出解完码的字符串。  


直接看例子：  

``` java
Example 1:
Input: s = "3[a]2[bc]"
Output: "aaabcbc"

Example 2:
Input: s = "3[a2[c]]"
Output: "accaccacc"
```

注意`[]`可以嵌套。  


## 解法1  

Thanks [米开： LeetCode 394. Decode String](https://www.youtube.com/watch?v=Rhc8n83kf7A){:target="_blank"}  

来看下示意图：  

![](https://yyc-images.oss-cn-beijing.aliyuncs.com/leetcode_394.png)  

注意，其实可以分为四种情况：  


第一，如果是当前字符是数字，只需要将其转换成`十进制`形式即可，留着备用。  

第二，如果是`[`，则先将当前指针指向下一位索引，然后递归调用，最后将返回的子串`*`次数。  

第三，如果是`]`，说明是部分或完全结束，仍先将当前指针指向下一位索引，并返回中间字符串。  

第四，其他情况都是字母，直接添加到中间字符串，并指向下一位索引即可。   


来看下实现：  


``` java
class Solution {
    
    private int i = 0;
    
    public String decodeString(String s) {
        
        int len = s.length();
        StringBuilder sb = new StringBuilder();
        
        while (i < len){
            int times = 0;
            // digit
            while (i < len && s.charAt(i) >= '0' && s.charAt(i) <= '9'){
                times = times * 10 + s.charAt(i) - '0';
                i++;
            }
            
            // [
            if (s.charAt(i) == '['){
                i++;
                String word = decodeString(s);
                while (times-- > 0){
                    sb.append(word);
                }
            }
            
            // ]
            else if (s.charAt(i) == ']'){
                i++;
                return new String(sb);
            }
            
            // letters
            else {
                sb.append(s.charAt(i));
                i++;
            }
        }
        
        return new String(sb);
    }
}
```

`Enjoy it ! `